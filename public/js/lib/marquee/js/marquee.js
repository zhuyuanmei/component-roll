define(function(){var e=function(t){this.settings=$.extend({},e.defaults,t),this.cache={allowMarquee:!0},this.init()};e.prototype={init:function(){this.create()},create:function(){var e=this;e.setStyle(),e.move()},setStyle:function(){var e,t,n,s,i,a=this;n=a.settings.li.height(),t=Math.max(parseInt(a.settings.li.css("margin-top"),10),parseInt(a.settings.li.css("margin-bottom"),10)),i=a.settings.showNum*n-t,s=9999,e="none",a.cache.stepW=a.settings.stepLen*n-t,a.cache.prevAnimateObj={top:-a.cache.stepW},a.cache.nextAnimateObj={top:0},a.cache.leftOrTop="top",a.settings.wrap.css({position:"absolute",width:"100%",height:i,margin:"0 auto",overflow:"hidden"}),a.settings.ul.css({position:"relative",height:s,top:0}),a.settings.li.css({"float":e})},move:function(){var e,t,n=this;if(n.settings.auto){switch(n.settings.direction){case"forward":t=n.prev;break;case"backward":t=n.next}e=n.settings.interval,setTimeout(function(){t.call(n),setTimeout(arguments.callee,e)},e),n.cache.moveBefore=n.cache.moveAfter=function(){return null}}else n.cache.moveBefore=function(){return n.cache.allowMarquee=!1},n.cache.moveAfter=function(){return n.cache.allowMarquee=!0}},prev:function(){var e,t,n=this;n.cache.allowMarquee&&(n.cache.moveBefore.call(n),t=n.settings.ul,e=t.children().slice(0,n.settings.stepLen),e.clone().appendTo(t),t.animate(n.cache.prevAnimateObj,n.settings.speed,function(){t.css(n.cache.leftOrTop,0),e.remove()}))},next:function(){var e,t,n=this;n.cache.allowMarquee&&(n.cache.moveBefore.call(this),t=n.settings.ul,e=t.children().slice(-n.settings.stepLen),e.clone().prependTo(t),t.css(n.cache.leftOrTop,-n.cache.stepW).animate(n.cache.nextAnimateObj,n.settings.speed,function(){e.remove()}))}},e.defaults={wrap:null,ul:null,li:null,auto:!0,interval:3e3,direction:"forward",speed:500,showNum:1,stepLen:1};var t=function(t){new e(t)};window.rMarquee=$.rMarquee=$.marquee=t});